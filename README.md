# Это репозиторий для учебных проектов на Airflow

## Задания
### Задание 1.
Развернуть локально Airflow и написать простой DAG с чтением данных из csv файла, обработкой, очисткой и выгрузкой в новый файл

### Задание 2.
Написать DAG Airflow, тасками которого будут следующие функции (город можно взять любой): 
1. Получение данных обо всех зданиях в городе и геометрии самого города с помощью библиотек osmnx и geopands, а также сохранение данных в отдельные файлы buildings.geojson, city_geometry.geojson
2. Получение данных о больницах в городе с сохранением в отдельный файл
3. Определение количества домов, которые приходятся на каждую больницу в радиусе 500 метров (тут можно считать расстояние от точки до точки напрямую)
4. Отрисовка графика с самыми загруженными больницами и его сохранение в файл

### Задание 3.
Реализовать сервис, который запускает sql скрипты. Скрипты (достаточно написать по одному) лежат в двух директориях. 
- Первая - скрипты для чтения csv файлов, их обработки
- Вторая - скрипты предназначенные для чтения parquet файлов, удаления дубликатов, а также исключения из результирующего набора данных тех id, которые присутствуют в справочнике errors.txt (создать самому)

Каждый понедельник нужно брать csv, читать и записывать результат (append'ом) в delta формате.
Раз в месяц необходимо витрину, рассчитанную по средам, обрабатывать и записывать результат.
Оркестрацию производить с помощью Airflow.

## Файловая структура

### dags 
Основная папка, в которой хранятся все даги и сопутствующие им файлы для выполнения заданий. В ней лежат:

- input - папка с входными данными для первого задания
- output - папка с выходными данными для первого задания
- first.py - даг для первого задания
